services:
  pg:
    # ConnectionString=
    #   Host=pg;
    #   Database=pakila;
    #   Username=postgres;
    #   Password=Pass@word;
    #   Port=5432;
    image: postgres
    #build:
    #  context: .
    #  dockerfile: pg/Dockerfile
    #restart: always
    environment:
      - POSTGRES_PASSWORD=Pass@word
      - PGPASSWORD=Pass@word
      - POSTGRES_DB=pakila
    volumes: 
      - ./jOOQ/jOOQ-examples/Sakila/postgres-sakila-db:/db-import
      - ./pg:/docker-entrypoint-initdb.d

  importdata:
    build:
      context: .
      dockerfile: mssql/Dockerfile

    environment:
      - SA_PASSWORD=Pass@word
    restart: no
    depends_on:
      - mssql

  mssql:
    # ConnectionString=
    #   Server=mssql;
    #   Database=sakila;
    #   User Id=sa;
    #   Password=Pass@word
    image: mcr.microsoft.com/mssql/server

    environment:
      - SA_PASSWORD=Pass@word
      - ACCEPT_EULA=Y
      - MSSQL_PID=Developer
    ports:
      - "5433:1433"
